grammar Midl
  include OptOut

  # The root grammar
  rule query
    all_keyword comma_keyword? but_keyword? ignore_opt_out?
  end

  rule word_break
    !(!(' '/',') .)
  end

  rule space
    ' '+
  end

  rule all_keyword
     'all' word_break
  end

  rule comma_keyword
     ',' word_break
  end
  rule but_keyword
     space? 'but' word_break
  end
end
